<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>QuirkJoke ‚Äî Random Joke Generator</title>

<style>
:root{
  --bg1:#0f172a;
  --bg2:#073b4c;
  --accent:#ff6363;
  --text:#e6eef8;
  --muted:#a7b3c7;
  --radius:16px;
  --shadow:0 10px 30px rgba(2,6,23,.6);
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Inter,system-ui,Arial;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--text);
  padding:24px;
}

.app{width:100%;max-width:800px}

.header{text-align:center;margin-bottom:18px}
.logo{margin:0;font-size:2rem}
.tag{color:var(--muted)}

.card{
  background:rgba(255,255,255,.05);
  border-radius:var(--radius);
  padding:26px;
  box-shadow:var(--shadow);
}

.joke-content{
  display:flex;
  gap:12px;
}

.quote{
  width:36px;
  height:36px;
  color:var(--accent);
}

.joke-main{
  margin:0;
  font-size:1.2rem;
  line-height:1.5;
  white-space:pre-wrap;
}

.card-actions{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:18px;
}

.right-actions{display:flex;gap:8px}

.btn{
  padding:10px 14px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  font-weight:600;
  background:#ffffff10;
  color:var(--text);
}

.btn:hover{transform:translateY(-2px)}

.primary{
  background:linear-gradient(90deg,#ff636344,#4fb0ff44);
}

.meta{
  margin-top:10px;
  font-size:.8rem;
  color:var(--muted);
}

.footer{
  margin-top:16px;
  text-align:center;
  color:var(--muted);
}
</style>
</head>

<body>

<main class="app">
  <header class="header">
    <h1 class="logo">QuirkJoke</h1>
    <p class="tag">Quick laughs powered by JokeAPI</p>
  </header>

  <section class="card" id="jokeCard">
    <div class="joke-content">
      <svg class="quote" viewBox="0 0 24 24">
        <path d="M9 7H7a5 5 0 0 0-5 5v5h8v-6a3 3 0 0 1 3-3h2V7h-6zm14 0h-2a5 5 0 0 0-5 5v5h8v-6a3 3 0 0 1 3-3h2V7h-6z"
              fill="currentColor"/>
      </svg>
      <p id="jokeMain" class="joke-main">Click ‚ÄúAnother!‚Äù to get a joke</p>
    </div>

    <div class="card-actions">
      <button id="anotherBtn" class="btn primary">Another!</button>
      <div class="right-actions">
        <button id="copyBtn" class="btn">Copy</button>
        <button id="facebookBtn" class="btn">Facebook</button>
      </div>
    </div>

    <div class="meta">
      <small>Source: JokeAPI ‚Ä¢ Safe mode</small>
    </div>
  </section>

  <footer class="footer">
    <small>Tip: Press Space for a new joke</small>
  </footer>
</main>

<script>
const API_URL =
  'https://v2.jokeapi.dev/joke/Any?blacklistFlags=nsfw,religious,political,racist,sexist,explicit';

const jokeMain = document.getElementById('jokeMain');
const anotherBtn = document.getElementById('anotherBtn');
const copyBtn = document.getElementById('copyBtn');
const facebookBtn = document.getElementById('facebookBtn');

let lastJokeText = '';
let loading = false;

async function fetchJoke(){
  if(loading) return;
  loading = true;
  anotherBtn.textContent = 'Loading...';

  try{
    const res = await fetch(API_URL);
    const data = await res.json();
    lastJokeText =
      data.type === 'single'
        ? data.joke
        : data.setup + "\\n\\n" + data.delivery;

    jokeMain.textContent = lastJokeText;
  }catch{
    jokeMain.textContent = 'Failed to load joke üòÖ';
  }finally{
    loading = false;
    anotherBtn.textContent = 'Another!';
  }
}

async function copyJoke(){
  if(!lastJokeText) return;
  await navigator.clipboard.writeText(lastJokeText);
  toast('Copied!');
}

function shareOnFacebook(){
  if(!lastJokeText) return;
  const text = encodeURIComponent(lastJokeText);
  const url = 'https://www.facebook.com/sharer/sharer.php?quote=' + text;
  window.open(url,'_blank','noopener');
}

function toast(msg){
  const t = document.createElement('div');
  t.textContent = msg;
  Object.assign(t.style,{
    position:'fixed',
    bottom:'24px',
    left:'50%',
    transform:'translateX(-50%)',
    background:'#000000cc',
    color:'#fff',
    padding:'8px 14px',
    borderRadius:'999px',
    zIndex:9999
  });
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),1400);
}

anotherBtn.onclick = fetchJoke;
copyBtn.onclick = copyJoke;
facebookBtn.onclick = shareOnFacebook;

window.addEventListener('keydown',e=>{
  if(e.code === 'Space'){
    e.preventDefault();
    fetchJoke();
  }
});

fetchJoke();
</script>

</body>
</html>
